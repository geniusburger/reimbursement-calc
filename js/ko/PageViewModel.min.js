function PageViewModel(){var a=this;a.date=ko.observable();a.amount=ko.observable();a.timeAmount=ko.observable(2);a.timeUnit=ko.observable("Years");a.rows=ko.observableArray();a.isSmall=ko.observable(!1);a.timeAmountOptions=ko.observableArray();a.timeUnitOptions=["Days","Months","Years"];a.populateTimeAmounts();a.removePair=function(b){a.rows.remove(b);a.rows.remove(b.matchingRow)};a.rows.subscribe(function(a){var c=new Currency("0");a.forEach(function(a,b,f){console.log("updating row "+b+" of "+
f.length+" with owed "+c.toString()+", before: "+a.owed());a.update(c);console.log("updating row "+b+" of "+f.length+" with owed "+c.toString()+", after:  "+a.owed())})})}
PageViewModel.prototype.populateTimeAmounts=function(){var a=this.timeAmount(),b=0;switch(this.timeUnit()){case "Days":b=30;break;case "Months":b=12;break;case "Years":b=20;break;default:console.error("Failed to populate time amounts from unit: "+this.timeUnit());return}this.timeAmountOptions.removeAll();for(var c=1;c<=b;c++)this.timeAmountOptions.push(c);a>b&&(a=b);this.timeAmount(a)};
PageViewModel.prototype.getInput=function(){console.log("getInput",this.date(),this.amount(),this.timeAmount(),this.timeUnit());var a=new Date(this.date()),b=new Currency(this.amount()),c=!0;b.valid||(c=!1);util.isInvalidDate(a)&&(c=!1);c&&(this.date(""),this.amount(""),this.addDate(a,b));return!1};
PageViewModel.prototype.addDate=function(a,b,c){var d=new Date(a),e=Number(this.timeAmount());switch(this.timeUnit()){case "Days":d.setDate(d.getDate()+e);break;case "Months":d.setMonth(d.getMonth()+e);break;default:console.log("Failed to find time unit, defaulting to years");case "Years":d.setFullYear(d.getFullYear()+e)}a=new RowViewModel(a,b,!0,this.isSmall,c);b=new RowViewModel(d,new Currency(b),!1,this.isSmall,c);a.matchingRow=b;b.matchingRow=a;this.rows.push(a);this.rows.push(b);this.rows.sort(function(a,
b){return a.date().getTime()-b.date().getTime()})};PageViewModel.prototype.loadTestData=function(){[["$7802.05","7/6/2012","first"],["$6931.49","2/1/2013","second"],["$7568.49","4/12/2013","third"],["$3802.00","1/6/2012","fourth"],["$3658.51","4/13/2012","fifth"],["$775.00","12/21/2012","sixth"],["$4350.00","6/28/2013","seventh"]].forEach(function(a){this.addDate(new Date(a[1]),new Currency(a[0]),a[2])},this)};PageViewModel.prototype.deleteAll=function(){this.rows.removeAll()};
PageViewModel.prototype.rowMouseOver=function(a){a.isHighlighted(!0).matchingRow.isHighlighted(!0)};PageViewModel.prototype.rowMouseOut=function(a){a.isHighlighted(!1).matchingRow.isHighlighted(!1)};
