function PageViewModel(){var a=this;a.date=ko.observable();a.dateError=ko.observable(!1);a.amount=ko.observable();a.amountError=ko.observable(!1);a.timeAmount=ko.observable(2);a.lastTimeAmount=1;a.timeUnit=ko.observable("Years");a.rows=ko.observableArray();a.isSmall=ko.observable(!1);a.timeUnitOptions=["Days","Months","Years"];a.sizeRow=new RowViewModel(new Date(0),new Currency("0"),!0,a.isSmall,"SizeRow");a.rows.push(new RowViewModel(new Date,new Currency("0"),!0,a.isSmall,"Today"));a.timeAmountOptions=
ko.computed(function(){var a=this.timeAmount(),b=0;switch(this.timeUnit()){case "Days":b=30;break;case "Months":b=12;break;case "Years":b=20;break;default:console.error("Failed to populate time amounts from unit: "+this.timeUnit());return}a>b&&(a=b);this.timeAmount(a);for(var a=[],c=1;c<=b;c++)a.push(c);return a},this);a.removePair=function(d){a.rows.remove(d);a.rows.remove(d.matchingRow)};a.rows.subscribe(function(a){var b=new Currency("0");a.forEach(function(a,d,e){console.log("updating row "+d+
" of "+e.length+" with owed "+b.toString()+", before: "+a.owed());a.update(b);console.log("updating row "+d+" of "+e.length+" with owed "+b.toString()+", after:  "+a.owed())})});a.deleteAll=function(){a.rows.removeAll();a.rows.push(new RowViewModel(new Date,new Currency("0"),!0,a.isSmall,"Today"))};a.getInput=function(){console.log("getInput",this.date(),this.amount(),this.timeAmount(),this.timeUnit());var d=new Date(this.date()),b=new Currency(this.amount()),c=!0;b.valid?a.amountError(!1):(c=!1,
a.amountError(!0));util.isInvalidDate(d)?(c=!1,a.dateError(!0)):a.dateError(!1);c&&(this.date(""),this.amount(""),this.addDate(d,b));return!1}}
PageViewModel.prototype.addDate=function(a,d){var b=new Date(a),c=Number(this.timeAmount());switch(this.timeUnit()){case "Days":b.setDate(b.getDate()+c);break;case "Months":b.setMonth(b.getMonth()+c);break;default:console.log("Failed to find time unit, defaulting to years");case "Years":b.setFullYear(b.getFullYear()+c)}c=new RowViewModel(a,d,!0,this.isSmall);b=new RowViewModel(b,new Currency(d),!1,this.isSmall);c.matchingRow=b;b.matchingRow=c;this.rows.push(c);this.rows.push(b);this.rows.sort(function(a,
b){return a.date.getTime()-b.date.getTime()})};PageViewModel.prototype.loadTestData=function(){[["$7802.05","7/6/2012"],["$6931.49","2/1/2013"],["$7568.49","4/12/2013"],["$3802.00","1/6/2012"],["$3658.51","4/13/2012"],["$775.00","12/21/2012"],["$4350.00","6/28/2013"]].forEach(function(a){this.addDate(new Date(a[1]),new Currency(a[0]))},this)};PageViewModel.prototype.rowMouseOver=function(a){a.isToday||a.isSizeRow||a.isHighlighted(!0).matchingRow.isHighlighted(!0)};
PageViewModel.prototype.rowMouseOut=function(a){a.isToday||a.isSizeRow||a.isHighlighted(!1).matchingRow.isHighlighted(!1)};
