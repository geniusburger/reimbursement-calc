function Currency(a){this.valid=!1;this.useThousandsSeparators=!0;this.cents=this.dollars=0;this.start=!0;if("string"===typeof a)if(a=a.replace(/\s|\$|,/g,""),isNaN(a))console.error("Currency constructed with invalid amount string",a);else{if(a=a.split("."),this.dollars=parseInt(a[0]),1==a.length&&a.push("0"),this.cents=parseInt(a[1]),isNaN(this.dollars)&&(this.dollars=0),isNaN(this.cents)&&(this.cents=0),1===a[1].length&&(this.cents*=10),this.valid=!0,0>this.dollars&&(this.valid=!1,console.error("Currency constructed with invalid dollars in amount string",
this.dollars)),0>this.cents||99<this.cents)this.valid=!1,console.error("Currency constructed with invalid cents in amount string",this.cents)}else"object"===typeof a&&(a instanceof Currency?(this.start=!1,this.dollars=a.dollars,this.cents=a.cents,this.valid=!0):console.error("Currency constructed with invalid amount object",a))}Currency.prototype.adjust=function(a){return a.start?this.add(a):this.subtract(a)};
Currency.prototype.add=function(a){if(a instanceof Currency)for(this.dollars+=a.dollars,this.cents+=a.cents;100<=this.cents;)this.dollars++,this.cents-=100;else console.error("Can't add non-Currency type",a);return this};
Currency.prototype.subtract=function(a){if(a instanceof Currency){this.dollars-=a.dollars;for(this.cents-=a.cents;0>this.cents;)this.dollars--,this.cents+=100;0>this.dollars&&(console.warn("Resetting negative Currency to zero",this.toString()),this.cents=this.dollars=0)}else console.error("Can't add non-Currency type",a);return this};Currency.prototype.getDollarsString=function(){return this.useThousandsSeparators?this.dollars.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):this.dollars.toString()};
Currency.prototype.getCentsString=function(){return 10<=this.cents?this.cents.toString():"0"+this.cents};Currency.prototype.toString=function(){return"$"+this.getDollarsString()+"."+this.getCentsString()};Currency.prototype.toFloat=function(){return parseFloat(this.dollars+"."+this.cents)};
